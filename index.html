<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarihi Yarımada CBS | İstanbul Kültürel Miras</title>
    
    <!-- Fonts - Ottoman Palace Style -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;600;700&family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Cesium JS -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    
    <!-- Leaflet for 2D Map -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loader-content">
            <!-- Logo PNG -->
            <img src="assets/logo.png" alt="Tarihi Yarımada Logo" class="loader-logo">
            <h1 class="loader-title">Tarihi Yarımada</h1>
            <p class="loader-subtitle">Kültürel Miras CBS Platformu</p>

            <!-- Tarihi Yarımada Silüeti Yüklenme Çizgisi -->
            <div class="skyline-loader">
                <svg class="skyline-svg" viewBox="0 0 800 80" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
                    <path class="skyline-path" d="M0,80 L0,65 L20,65 L22,50 L24,20 L26,50 L28,65 L45,65 Q55,45 65,65 L80,65 L82,55 L84,25 L86,55 L88,65 L110,65 L110,50 Q125,30 140,50 L140,65 L160,65 L160,40 Q180,15 200,40 L200,65 L220,65 L222,45 L224,15 L226,45 L228,65 L250,65 Q270,35 290,65 L310,65 L312,50 L314,18 L316,50 L318,65 L345,65 L345,35 Q375,5 405,35 L405,65 L425,65 L427,50 L429,15 L431,50 L433,65 L455,65 L455,50 Q475,25 495,50 L495,65 L520,65 L520,25 Q555,-5 590,25 L590,65 L615,65 L617,45 L619,10 L621,45 L623,65 L655,65 L655,40 Q685,20 715,40 L715,65 L740,65 L742,55 L744,30 L746,55 L748,65 L780,65 Q790,50 800,65 L800,80 Z"
                          fill="none"
                          stroke="var(--color-accent)"
                          stroke-width="2.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"/>
                </svg>
            </div>

            <p class="loader-status">Hazırlanıyor...</p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="header">
            <!-- İstanbul Silüeti PNG -->
            <img src="assets/silhouette.png" alt="İstanbul Tarihi Yarımada Silüeti" class="header-silhouette-center">

            <div class="header-left">
                <div class="logo">
                    <!-- Logo PNG -->
                    <img src="assets/logo.png" alt="Tarihi Yarımada Logo" class="logo-icon">

                    <div class="logo-text">
                        <span class="logo-title">Tarihi Yarımada</span>
                        <span class="logo-tagline">Kültürel Miras CBS Platformu</span>
                    </div>
                </div>
            </div>
            
            <!-- Main Navigation - Moved to Header Right -->
            <div class="header-right">
                <!-- Eserler Dropdown -->
                <div class="nav-dropdown">
                    <button class="nav-btn dropdown-toggle">
                        <span class="nav-text">Eserler</span>
                        <span class="dropdown-arrow">▼</span>
                    </button>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                            <!-- Osmanlı Dönemi -->
                            <div class="dropdown-section">
                                <h4 class="dropdown-section-title">
                                    <svg class="period-icon" viewBox="0 0 16 16" width="12" height="12">
                                        <rect x="3" y="3" width="10" height="10" fill="currentColor"/>
                                    </svg>
                                    Osmanlı Dönemi (1453-1923)
                                </h4>
                                <button class="dropdown-item" data-asset="sultanahmet">
                                    <span class="asset-name">Sultanahmet Camii</span>
                                </button>
                                <button class="dropdown-item" data-asset="topkapi">
                                    <span class="asset-name">Topkapı Sarayı</span>
                                </button>
                                <button class="dropdown-item" data-asset="suleymaniye">
                                    <span class="asset-name">Süleymaniye Camii</span>
                                </button>
                            </div>
                            <!-- Bizans Dönemi -->
                            <div class="dropdown-section">
                                <h4 class="dropdown-section-title">
                                    <svg class="period-icon" viewBox="0 0 16 16" width="12" height="12">
                                        <rect x="3" y="3" width="10" height="10" fill="currentColor"/>
                                    </svg>
                                    Bizans Dönemi (330-1453)
                                </h4>
                                <button class="dropdown-item" data-asset="ayasofya">
                                    <span class="asset-name">Ayasofya-i Kebir</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hakkında Button -->
                <button class="nav-btn" id="btn-about">
                    <span class="nav-text">Hakkında</span>
                </button>
                
                <button class="icon-btn" id="btn-basemap" title="Altlık Harita">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="2" y1="12" x2="22" y2="12"/>
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                    </svg>
                </button>
                <button class="icon-btn" id="btn-layers" title="Katmanlar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12 2 2 7 12 12 22 7 12 2"/>
                        <polyline points="2 17 12 22 22 17"/>
                        <polyline points="2 12 12 17 22 12"/>
                    </svg>
                </button>
                <button class="icon-btn" id="btn-settings" title="Ayarlar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Cesium Viewer -->
            <div id="cesium-container" class="viewer-container active">
                <div id="cesiumViewer" class="viewer"></div>
                <div class="viewer-overlay">
                    <div class="location-badge">
                        <span class="location-text" id="location-text">Tarihi Yarımada - İstanbul</span>
                    </div>
                </div>
                <!-- Viewer Controls -->
                <div class="viewer-controls">
                    <button class="viewer-control-btn" id="btn-orbit" title="Etrafında Dön">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
                            <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
                            <ellipse cx="12" cy="5" rx="9" ry="3"/>
                            <path d="M18 5v1"/>
                            <path d="M6 5v1"/>
                            <path d="M16 19l2 2 4-4" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button class="viewer-control-btn" id="btn-home" title="Ana Görünüm">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                            <polyline points="9 22 9 12 15 12 15 22"/>
                        </svg>
                    </button>
                    <button class="viewer-control-btn" id="btn-zoom-in" title="Yakınlaş">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            <line x1="11" y1="8" x2="11" y2="14"/>
                            <line x1="8" y1="11" x2="14" y2="11"/>
                        </svg>
                    </button>
                    <button class="viewer-control-btn" id="btn-zoom-out" title="Uzaklaş">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            <line x1="8" y1="11" x2="14" y2="11"/>
                        </svg>
                    </button>
                    <button class="viewer-control-btn" id="btn-fullscreen" title="Tam Ekran">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <polyline points="15 3 21 3 21 9"/>
                            <polyline points="9 21 3 21 3 15"/>
                            <line x1="21" y1="3" x2="14" y2="10"/>
                            <line x1="3" y1="21" x2="10" y2="14"/>
                        </svg>
                    </button>
                </div>
            </div>
            
        </main>

        <!-- Asset Info Panel (Right Side) - Başlangıçta kapalı -->
        <aside id="asset-panel" class="asset-panel">
            <div class="panel-header">
                <h2 class="panel-title" id="asset-panel-title">Yapı Bilgileri</h2>
                <button class="panel-close" id="asset-panel-close">×</button>
            </div>
            <div class="panel-content">
                <!-- Asset Header Info -->
                <section class="panel-section asset-section">
                    <div class="asset-header-info">
                        <h3 id="asset-name" class="asset-main-title">Seçili Eseri Görüntüleyin</h3>
                        <span class="asset-period-badge" id="asset-period">Tarihi Eser</span>
                    </div>
                </section>

                <!-- Photo Gallery Placeholder -->
                <section class="panel-section">
                    <h3 class="section-title">Fotoğraf Galerisi</h3>
                    <div class="photo-gallery-placeholder">
                        <div class="gallery-placeholder-inner">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="48" height="48">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21 15 16 10 5 21"/>
                            </svg>
                            <p>Fotoğraf galerisi yakında eklenecek</p>
                        </div>
                    </div>
                </section>

                <!-- Asset Details -->
                <section class="panel-section">
                    <h3 class="section-title">Detaylı Bilgi</h3>
                    <div class="info-card">
                        <div class="info-body">
                            <div class="info-row">
                                <span class="info-label">Yapım Yılı</span>
                                <span class="info-value" id="asset-year">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Dönem</span>
                                <span class="info-value" id="asset-period-info">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Banisi/Mimarı</span>
                                <span class="info-value" id="asset-founder">-</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Konum</span>
                                <span class="info-value" id="asset-location">-</span>
                            </div>
                            <div class="info-description">
                                <p id="asset-description">Detaylı bilgi yüklenecek...</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 3D Model Layers -->
                <section class="panel-section">
                    <h3 class="section-title">3D Modeller</h3>
                    <div class="layer-list" id="asset-layers">
                        <!-- Model katmanları dinamik yüklenecek -->
                    </div>
                </section>

                <!-- Notes Section -->
                <section class="panel-section">
                    <h3 class="section-title">Notlarım</h3>
                    <div class="notes-container">
                        <!-- Not Ekleme Formu -->
                        <div class="note-form">
                            <div class="note-input-group">
                                <input type="text" id="note-title" class="note-input" placeholder="Not başlığı..." maxlength="100">
                                <span class="input-hint">Kısa ve açıklayıcı bir başlık girin</span>
                            </div>
                            <div class="note-input-group">
                                <textarea id="note-content" class="note-textarea" placeholder="Notunuzu buraya yazın..." rows="4" maxlength="500"></textarea>
                                <span class="char-counter"><span id="char-count">0</span>/500</span>
                            </div>
                            <div class="note-input-group">
                                <input type="text" id="note-author" class="note-input note-input-sm" placeholder="İsminiz (opsiyonel)">
                            </div>
                            <button id="btn-save-note" class="note-save-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                                    <polyline points="17 21 17 13 7 13 7 21"/>
                                    <polyline points="7 3 7 8 15 8"/>
                                </svg>
                                Notu Kaydet
                            </button>
                        </div>
                        
                        <!-- Kayıtlı Notlar Listesi -->
                        <div class="notes-list" id="notes-list">
                            <div class="notes-list-header">
                                <span class="notes-count">Kayıtlı Notlar (<span id="notes-count-number">0</span>)</span>
                                <button id="btn-refresh-notes" class="notes-refresh-btn" title="Notları Yenile">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                        <polyline points="23 4 23 10 17 10"/>
                                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="notes-items" id="notes-items">
                                <!-- Notlar JavaScript ile yüklenecek -->
                                <div class="notes-empty">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="48" height="48">
                                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                                        <polyline points="14 2 14 8 20 8"/>
                                        <line x1="16" y1="13" x2="8" y2="13"/>
                                        <line x1="16" y1="17" x2="8" y2="17"/>
                                        <line x1="10" y1="9" x2="8" y2="9"/>
                                    </svg>
                                    <p>Henüz not eklenmemiş</p>
                                    <span>Yukarıdaki formu kullanarak ilk notunuzu ekleyin!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </aside>

        <!-- About Panel (Kenardan açılır) -->
        <aside id="about-panel" class="about-panel">
            <div class="panel-header">
                <h2 class="panel-title">Tarihi Yarımada Hakkında</h2>
                <button class="panel-close" id="about-close">×</button>
            </div>
            <div class="panel-content about-panel-content">
                <section class="panel-section">
                    <h3 class="section-title">İstanbul Tarihi Yarımada</h3>
                    <div class="about-text">
                        <p>Tarihi Yarımada, İstanbul'un Avrupa yakasında yer alan ve yaklaşık 2500 yıllık tarihçe barındıran bölgedir. Bizans döneminin başkenti Konstantinopolis'ten, Osmanlı İmparatorluğu döneminde İstanbul olarak anılan bu bölge, önemli tarihi yapıları ile bilinir.</p>
                    </div>
                </section>

                <section class="panel-section">
                    <h3 class="section-title">Bizans Dönemi (330-1453)</h3>
                    <div class="about-text">
                        <p>Konstantinopolis'in kurulduğu bu dönemde Ayasofya, Hipodrom ve birçok önemli yapı inşa edilmiştir. Şehir, ilk Hristiyanlık ve Orta Çağ mimarisinin merkezi olmuştur.</p>
                    </div>
                </section>

                <section class="panel-section">
                    <h3 class="section-title">Osmanlı Dönemi (1453-1923)</h3>
                    <div class="about-text">
                        <p>Fatih Sultan Mehmed'in fethi ile başlayan bu dönem, Osmanlı mimarisinin en görkemli yapılarının inşasını gördü. Süleymaniye Camii, Sultanahmet Camii ve Topkapı Sarayı bu dönemin en önemli eserleridir.</p>
                    </div>
                </section>

                <section class="panel-section">
                    <h3 class="section-title">UNESCO Dünya Mirası</h3>
                    <div class="about-text">
                        <p>Tarihi Yarımada, 1985 yılından beri UNESCO Dünya Kültür Mirası listesine kayıtlıdır.</p>
                    </div>
                </section>

                <section class="panel-section">
                    <div class="heritage-stats">
                        <div class="stat-item">
                            <span class="stat-number">2500+</span>
                            <span class="stat-label">Yıllık Tarih</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">20+</span>
                            <span class="stat-label">Tarihi Eser</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">4</span>
                            <span class="stat-label">İmparatorluk</span>
                        </div>
                    </div>
                </section>
            </div>
        </aside>


        <!-- Basemap Modal -->
        <div id="basemap-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Altlık Harita</h2>
                    <button class="modal-close">×</button>
                </div>
                <div class="modal-body">
                    <div class="basemap-grid">
                        <button class="basemap-option active" data-basemap="satellite">
                            <div class="basemap-preview satellite-preview"></div>
                            <span>Uydu Görüntüsü</span>
                        </button>
                        <button class="basemap-option" data-basemap="osm">
                            <div class="basemap-preview default-preview"></div>
                            <span>Sokak Haritası</span>
                        </button>
                        <button class="basemap-option" data-basemap="cartoDark">
                            <div class="basemap-preview dark-preview"></div>
                            <span>Karanlık Tema</span>
                        </button>
                        <button class="basemap-option" data-basemap="cartoPositron">
                            <div class="basemap-preview terrain-preview"></div>
                            <span>Açık Minimal</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Layers Modal -->
        <div id="layers-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Katmanlar</h2>
                    <button class="modal-close">×</button>
                </div>
                <div class="modal-body">
                    <div class="layers-list">
                        <div class="layer-group">
                            <h3 class="layer-group-title">3D Modeller</h3>
                            <label class="layer-option">
                                <input type="checkbox" checked data-layer="buildings">
                                <span>Tarihi Yapılar</span>
                            </label>
                            <label class="layer-option">
                                <input type="checkbox" data-layer="terrain">
                                <span>Arazi Modeli</span>
                            </label>
                        </div>
                        <div class="layer-group">
                            <h3 class="layer-group-title">Bilgi Katmanları</h3>
                            <label class="layer-option">
                                <input type="checkbox" data-layer="labels">
                                <span>Etiketler</span>
                            </label>
                            <label class="layer-option">
                                <input type="checkbox" data-layer="borders">
                                <span>Sınırlar</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Ayarlar</h2>
                    <button class="modal-close">×</button>
                </div>
                <div class="modal-body">
                    <div class="settings-group">
                        <label class="settings-label">Render Kalitesi</label>
                        <select class="settings-select" id="render-quality">
                            <option value="low" selected>Düşük</option>
                            <option value="medium">Orta</option>
                            <option value="high">Yüksek</option>
                            <option value="ultra">Ultra</option>
                        </select>
                    </div>
                    <div class="settings-group">
                        <label class="settings-label">Point Cloud Boyutu</label>
                        <input type="range" class="settings-range" id="point-size" min="1" max="10" value="3">
                    </div>
                    <div class="settings-group">
                        <label class="settings-label">
                            <input type="checkbox" id="show-shadows">
                            <span>Gölgeleri Göster</span>
                        </label>
                    </div>
                    <div class="settings-group">
                        <label class="settings-label">
                            <input type="checkbox" id="terrain-enabled" checked>
                            <span>Altlık Harita Göster</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>


        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <span class="status-item">
                    <span class="status-dot online"></span>
                    API Bağlantısı
                </span>
                <span class="status-item" id="coordinates">
                    41.0082° N, 28.9784° E
                </span>
            </div>
            <div class="status-center">
                <span class="status-item" id="fps-counter">60 FPS</span>
            </div>
            <div class="status-right">
                <!-- İTÜ yazısı kaldırıldı -->
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/assets.js"></script>
    <script src="js/api.js"></script>
    <script src="js/cesiumViewer.js"></script>
    <script src="js/main.js"></script>
</body>
</html>


